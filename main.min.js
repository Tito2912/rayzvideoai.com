const runIdle=(e,t=400)=>{(window.requestIdleCallback||(e=>setTimeout(e,t)))(()=>{try{e()}catch(e){}})};runIdle(()=>{const e=document.querySelector(".burger"),t=document.querySelector("#site-nav");if(!e||!t)return;const n=()=>{t.classList.remove("open"),e.setAttribute("aria-expanded","false"),document.body.style.overflow=""};e.addEventListener("click",()=>{t.classList.contains("open")?n():(t.classList.add("open"),e.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&n()}),t.querySelectorAll("a").forEach(e=>{e.addEventListener("click",n)})}),(()=>{const e=document.getElementById("cookie-banner"),t=document.getElementById("cookie-accept"),n=document.getElementById("cookie-reject"),a="G-T5NE017KTW";let r=!1;const d=(...e)=>{"function"==typeof gtag&&gtag(...e)},o=()=>{if(r)return;(window.requestIdleCallback||window.setTimeout)(()=>(()=>{if(r)return;r=!0;const e=document.createElement("script");e.src=`https://www.googletagmanager.com/gtag/js?id=${a}`,e.async=!0,e.dataset.ga4="1",e.onload=()=>{d("js",new Date),d("config",a)},document.head.appendChild(e)})(),800)};function c(e){try{localStorage.setItem("cookie_consent",e)}catch(e){}}function s(e){e?(o(),d("consent","update",{analytics_storage:"granted",ad_storage:"granted",ad_user_data:"granted",ad_personalization:"granted"}),d("config",a)):d("consent","update",{analytics_storage:"denied",ad_storage:"denied",ad_user_data:"denied",ad_personalization:"denied"})}function i(e,t,n){if(!e)return;const a=`bound_${t}`;e.dataset[a]||(e.addEventListener(t,n),e.dataset[a]="1")}const l=function(){try{return localStorage.getItem("cookie_consent")}catch(e){return null}}();"accepted"===l?(e&&e.classList.add("hidden"),s(!0),o()):"rejected"===l?(e&&e.classList.add("hidden"),s(!1)):e&&e.classList.remove("hidden"),i(t,"click",()=>{c("accepted"),e&&e.classList.add("hidden"),s(!0),o()}),i(n,"click",()=>{c("rejected"),e&&e.classList.add("hidden"),s(!1)})})(),runIdle(()=>{const e=document.querySelector("[data-lazy-video]");if(!e)return;const t=e.dataset.src,n=e.dataset.poster||"",a=window.matchMedia&&window.matchMedia("(prefers-reduced-data: reduce)").matches;if(!t||a)return;const r=()=>{(window.requestIdleCallback||window.setTimeout)(()=>(()=>{const a=document.createElement("video");a.muted=!0,a.defaultMuted=!0,a.autoplay=!0,a.loop=!0,a.playsInline=!0,a.setAttribute("muted",""),a.setAttribute("autoplay",""),a.setAttribute("playsinline",""),a.setAttribute("loop",""),a.preload="auto",a.setAttribute("preload","auto"),n&&(a.poster=n),a.className="hero-video";const r=document.createElement("source");r.src=t,r.type="video/mp4",a.appendChild(r);const d=()=>{const e=a.play();e&&"function"==typeof e.catch&&e.catch(()=>{})};a.addEventListener("canplay",d,{once:!0}),e.replaceChildren(a),d(),a.addEventListener("loadeddata",()=>a.classList.add("loaded"),{once:!0}),a.addEventListener("error",()=>{a.classList.contains("loaded")||a.classList.add("loaded")},{once:!0})})(),400)};if("IntersectionObserver"in window){const t=new IntersectionObserver(e=>{e.some(e=>e.isIntersecting)&&(r(),t.disconnect())},{rootMargin:"120px"});t.observe(e)}else r()}),runIdle(()=>{const e=Array.from(document.querySelectorAll("iframe.video-embed[data-src]"));if(!e.length)return;const t=e=>{if(e.dataset.loaded)return;e.dataset.loaded="1";const t=e.dataset.src;t&&(e.src=t)};if("IntersectionObserver"in window){const n=new IntersectionObserver(e=>{e.forEach(({isIntersecting:e,target:a})=>{e&&(t(a),n.unobserve(a))})},{rootMargin:"200px"});e.forEach(e=>n.observe(e))}else setTimeout(()=>e.forEach(t),1200);e.forEach(e=>{e.addEventListener("pointerdown",()=>t(e),{once:!0}),e.addEventListener("keydown",n=>{"Enter"!==n.key&&" "!==n.key||t(e)})}),(window.requestIdleCallback||window.setTimeout)(()=>e.forEach(t),6e3)}),runIdle(()=>{document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",t=>{const n=e.getAttribute("href").slice(1),a=document.getElementById(n);a&&(t.preventDefault(),a.scrollIntoView({behavior:"smooth",block:"start"}))})})}),runIdle(()=>{const e=Array.from(document.querySelectorAll(".faq .faq-q")),t=Array.from(document.querySelectorAll(".faq .faq-a"));if(!e.length)return;t.forEach(e=>{e.setAttribute("aria-hidden","true"),e.style.maxHeight="0px"}),e.forEach(e=>e.setAttribute("aria-expanded","false"));e.forEach(n=>{const a=n.nextElementSibling;n.addEventListener("click",()=>{"true"===n.getAttribute("aria-expanded")?(n.setAttribute("aria-expanded","false"),a.setAttribute("aria-hidden","true"),a.style.maxHeight="0px"):(((n=null)=>{e.forEach(e=>{e!==n&&e.setAttribute("aria-expanded","false")}),t.forEach(e=>{e!==(n&&n.nextElementSibling)&&(e.setAttribute("aria-hidden","true"),e.style.maxHeight="0px")})})(n),n.setAttribute("aria-expanded","true"),a.setAttribute("aria-hidden","false"),a.style.maxHeight=a.scrollHeight+"px")})}),window.addEventListener("resize",()=>{e.forEach(e=>{const t=e.nextElementSibling;"true"===e.getAttribute("aria-expanded")&&(t.style.maxHeight=t.scrollHeight+"px")})})}),runIdle(()=>{const e=document.querySelector(".hero-video");if(!e)return;const t=()=>{const t=e.play();t&&"function"==typeof t.catch&&t.catch(()=>{})};e.addEventListener("canplay",t,{once:!0}),t()});